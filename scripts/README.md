# Snapshot Analysis Scripts

This directory contains Python scripts for analyzing JSON snapshots generated by the **LocalApp** tick-frame substrate implementation.

## Overview

The `LocalApp` Java application (`tick-space-runner/src/main/java/eu/jerrysamek/tickspace/runner/LocalApp.java`) runs a discrete tick-frame substrate simulation and periodically exports snapshots of the entity state to JSON files.

**Snapshot format:**
- Output directory: `W:\data\snapshots\`
- File naming: `time-frame.{tick}.json`
- Frequency: Every 1000 ticks
- Content: JSON array of entity objects with fields:
  - `position.coordinates` - [x, y, z] spatial coordinates
  - `energy` - entity energy value
  - `depth` - entity depth in substrate hierarchy
  - `momentum` - [mx, my, mz] momentum vector

## Available Scripts

### 1. `snapshot-stats.py`

Computes shell-wise statistical summaries of entity distributions using Manhattan distance.

**Usage:**
```bash
python snapshot-stats.py <snapshot.json> [max_entities]
```

**Output:**
- Entities grouped by Manhattan radius shells (r = |x| + |y| + |z|)
- Per-shell statistics:
  - Entity count
  - Average, min, max energy
  - Average depth
  - Number of unique momentum vectors

**Example:**
```bash
python snapshot-stats.py W:\data\snapshots\time-frame.5000.json
```

### 2. `snapshot-visualization.py`

Creates 3D scatter plot visualizations of entity positions colored by energy level.

**Usage:**
```bash
python snapshot-visualization.py <snapshot.json>
```

**Output:**
- Interactive 3D matplotlib visualization
- X, Y, Z axes showing spatial distribution
- Color map (plasma) indicates energy levels
- Point size: 40px

**Dependencies:**
- `matplotlib`
- `mpl_toolkits.mplot3d`

**Example:**
```bash
python snapshot-visualization.py W:\data\snapshots\time-frame.10000.json
```

### 3. `snapshot-energy-histogram.py`

Generates two analytical plots: energy distribution histogram and radial density profile.

**Usage:**
```bash
python snapshot-energy-histogram.py <snapshot.json>
```

**Output:**
Two matplotlib figures:

1. **Energy Distribution Histogram**
   - 25 bins spanning full energy range
   - Shows frequency distribution of entity energies

2. **Radial Density Profile**
   - Euclidean distance from origin (r = √(x² + y² + z²))
   - Entities per radial shell
   - Shows spatial concentration patterns

**Dependencies:**
- `numpy`
- `matplotlib`

**Example:**
```bash
python snapshot-energy-histogram.py W:\data\snapshots\time-frame.15000.json
```

## Installation

Install required Python dependencies:

```bash
pip install numpy matplotlib
```

## Typical Workflow

1. **Run the substrate simulation:**
   ```bash
   # From project root
   mvn exec:java -pl tick-space-runner -Dexec.mainClass="eu.jerrysamek.tickspace.runner.LocalApp"
   ```

2. **Wait for snapshots to be generated** (every 1000 ticks to `W:\data\snapshots\`)

3. **Analyze snapshots:**
   ```bash
   # Quick statistics
   python scripts/snapshot-stats.py W:\data\snapshots\time-frame.5000.json

   # Visual exploration
   python scripts/snapshot-visualization.py W:\data\snapshots\time-frame.5000.json

   # Energy and density analysis
   python scripts/snapshot-energy-histogram.py W:\data\snapshots\time-frame.5000.json
   ```

## Theoretical Context

These scripts support empirical validation of tick-frame physics principles:

- **Collision Persistence Principle** (Doc 30) - Entity lifetime and density patterns
- **Imbalance Theory** (Doc 29) - Energy distribution asymmetries
- **Horizon Boundaries** (Doc 26) - Radial expansion and observable limits
- **Temporal Surfing** (Doc 28) - Persistence patterns across ticks

See `docs/theory/` for full theoretical framework.

## Notes

- Snapshot files can be large (millions of entities); `snapshot-stats.py` supports limiting processing via `max_entities` parameter
- All scripts use standard JSON parsing; no streaming for simplicity
- Color schemes optimized for visualization clarity (plasma, custom palettes)
- Scripts are single-snapshot focused; time-series analysis can be built by iterating over multiple snapshots

## Future Enhancements

Potential extensions:
- Time-series animation across multiple snapshots
- Collision event tracking between consecutive snapshots
- Momentum vector field visualization
- Entity lineage tracking (parent-child relationships)
- Comparative analysis between different simulation parameters